<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N2B - ì •ë¶€ R&D ì •ì±…ì‚¬ì—… ë§¤ì¹­ ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .mode-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        .mode-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        .mode-btn.active {
            background: #667eea;
            color: white;
        }
        .mode-btn:hover {
            transform: translateY(-2px);
        }
        .api-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .api-input:focus {
            border-color: #667eea;
            outline: none;
        }
        .sample-cards {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        .sample-card {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sample-card:hover, .sample-card.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }
        .sample-card h4 {
            color: #667eea;
            margin-bottom: 8px;
        }
        .sample-card p {
            font-size: 13px;
            color: #666;
        }
        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            resize: vertical;
        }
        textarea:focus {
            border-color: #667eea;
            outline: none;
        }
        .analyze-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-2px);
        }
        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .result-section {
            display: none;
        }
        .result-section.show {
            display: block;
        }
        .n2b-result {
            margin-bottom: 15px;
        }
        .n2b-label {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .n2b-label.not { background: #ffebee; color: #c62828; }
        .n2b-label.but { background: #e3f2fd; color: #1565c0; }
        .n2b-label.because { background: #e8f5e9; color: #2e7d32; }
        .n2b-content {
            padding: 10px 15px;
            background: #f5f5f5;
            border-radius: 8px;
            line-height: 1.6;
        }
        .policy-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        .policy-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        .policy-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        .policy-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            flex: 1;
        }
        .policy-rank {
            color: #667eea;
            font-weight: bold;
            margin-right: 8px;
        }
        .match-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            white-space: nowrap;
        }
        .policy-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .policy-meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 13px;
            color: #666;
        }
        .policy-meta-item.deadline {
            color: #c62828;
            font-weight: bold;
        }
        .policy-meta-item.category {
            background: #e3f2fd;
            color: #1565c0;
            padding: 3px 10px;
            border-radius: 12px;
        }
        .policy-reason {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
            margin-bottom: 12px;
        }
        .policy-link {
            display: inline-block;
            padding: 8px 16px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 13px;
            transition: background 0.3s;
        }
        .policy-link:hover {
            background: #5a6fd6;
        }
        .loading-section {
            display: none;
            text-align: center;
            padding: 40px;
        }
        .loading-section.show {
            display: block;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e0e0e0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .demo-notice {
            display: none;
            background: #fff3e0;
            border: 1px solid #ffb74d;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
            font-size: 14px;
            color: #e65100;
        }
        .demo-notice.show {
            display: block;
        }
        .realtime-badge {
            display: inline-block;
            background: #4caf50;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 11px;
            margin-left: 10px;
        }
        .footer {
            text-align: center;
            color: white;
            opacity: 0.8;
            margin-top: 30px;
            font-size: 14px;
        }
        .helper-text {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ N2B</h1>
            <p>ì •ë¶€ R&D ì •ì±…ì‚¬ì—… ë§¤ì¹­ ì‹œìŠ¤í…œ <span class="realtime-badge">ì‹¤ì‹œê°„ ì›¹ê²€ìƒ‰</span></p>
        </div>

        <div class="card">
            <h2>ğŸš€ ì‹œì‘í•˜ê¸°</h2>
            <div class="mode-selector">
                <button class="mode-btn active" onclick="setMode('demo')" id="demoBtn">
                    <strong>ğŸ¬ ë°ëª¨ ì²´í—˜</strong><br>
                    <small>API í‚¤ ì—†ì´ ë°”ë¡œ ì²´í—˜í•´ë³´ì„¸ìš”!</small>
                </button>
                <button class="mode-btn" onclick="setMode('real')" id="realBtn">
                    <strong>ğŸ”‘ ì‹¤ì œ ë¶„ì„</strong><br>
                    <small>ë³¸ì¸ API í‚¤ë¡œ ì‹¤ì‹œê°„ ê²€ìƒ‰</small>
                </button>
            </div>
            <div id="apiKeySection" style="display: none;">
                <input type="password" class="api-input" id="apiKey" placeholder="Anthropic API í‚¤">
                <p class="helper-text">ğŸ’¡ API í‚¤ëŠ” <a href="https://console.anthropic.com/" target="_blank">Anthropic Console</a>ì—ì„œ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“ ì‚¬ì—…ê³„íš ì…ë ¥</h2>
            <p style="margin-bottom: 15px; color: #666;">ìƒ˜í”Œì„ ì„ íƒí•˜ê±°ë‚˜ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”:</p>
            <div class="sample-cards">
                <div class="sample-card" onclick="selectSample(1)">
                    <h4>ğŸ¤– AI í—¬ìŠ¤ì¼€ì–´</h4>
                    <p>AI ê¸°ë°˜ ê°œì¸ ë§ì¶¤í˜• ê±´ê°•ê´€ë¦¬ í”Œë«í¼ ê°œë°œ</p>
                </div>
                <div class="sample-card" onclick="selectSample(2)">
                    <h4>ğŸŒ± ìŠ¤ë§ˆíŠ¸íŒœ</h4>
                    <p>IoT ì„¼ì„œ ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë†ì—… ì†”ë£¨ì…˜</p>
                </div>
                <div class="sample-card" onclick="selectSample(3)">
                    <h4>â™»ï¸ íí”Œë¼ìŠ¤í‹± ì¬í™œìš©</h4>
                    <p>AI ê¸°ë°˜ íí”Œë¼ìŠ¤í‹± ìë™ ë¶„ë¥˜ ì‹œìŠ¤í…œ</p>
                </div>
            </div>
            <textarea id="businessPlan" placeholder="ì‚¬ì—…ê³„íšì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
        </div>

        <button class="analyze-btn" onclick="analyze()" id="analyzeBtn">
            ğŸ” N2B ë¶„ì„ ë° ì •ì±… ë§¤ì¹­ ì‹œì‘
        </button>

        <div class="demo-notice" id="demoNotice">
            âš ï¸ <strong>ë°ëª¨ ëª¨ë“œ</strong>: ë¯¸ë¦¬ ì¤€ë¹„ëœ ìƒ˜í”Œ ê²°ê³¼ì…ë‹ˆë‹¤. ì‹¤ì‹œê°„ ê²€ìƒ‰ì€ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
        </div>

        <div class="loading-section" id="loadingSection">
            <div class="spinner"></div>
            <p>AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤... (ì‹¤ì‹œê°„ ì›¹ê²€ìƒ‰ í¬í•¨)</p>
        </div>

        <div class="result-section" id="resultSection">
            <div class="card">
                <h2>ğŸ“Š N2B ë¶„ì„ ê²°ê³¼</h2>
                <div class="n2b-result">
                    <div class="n2b-label not">N (NOT) ë¬¸ì œì  í¬ì°©</div>
                    <div class="n2b-content" id="resultN"></div>
                </div>
                <div class="n2b-result">
                    <div class="n2b-label but">B (BUT) í•´ê²° ì†”ë£¨ì…˜</div>
                    <div class="n2b-content" id="resultB"></div>
                </div>
                <div class="n2b-result">
                    <div class="n2b-label because">C (BECAUSE) ê·¼ê±° ë° ì°¨ë³„ì </div>
                    <div class="n2b-content" id="resultC"></div>
                </div>
            </div>

            <div class="card">
                <h2>ğŸ¯ ì¶”ì²œ ì •ë¶€ì§€ì›ì‚¬ì—… Top 3 <span class="realtime-badge">ì‹¤ì‹œê°„</span></h2>
                <div id="policyResults"></div>
            </div>
        </div>

        <div class="footer">
            <p>Â© 2025 N2B Framework by Brian Yoo | SINCE: 2025.12.08</p>
        </div>
    </div>

    <script>
        const BACKEND_URL = 'https://n2b-backend.onrender.com';
        
        let currentMode = 'demo';
        
        const samples = {
            1: `AI ê¸°ë°˜ ê°œì¸ ë§ì¶¤í˜• ê±´ê°•ê´€ë¦¬ í”Œë«í¼ ê°œë°œ

í˜„ì¬ ê±´ê°•ê´€ë¦¬ ì•±ë“¤ì€ ë‹¨ìˆœ ê¸°ë¡ ìœ„ì£¼ë¡œ, ê°œì¸ë³„ ë§ì¶¤ ê±´ê°• ì¡°ì–¸ì„ ì œê³µí•˜ì§€ ëª»í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì €í¬ëŠ” AIë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ê±´ê°• ë°ì´í„°(í™œë™ëŸ‰, ìˆ˜ë©´, ì‹ë‹¨ ë“±)ë¥¼ ë¶„ì„í•˜ê³ , ê°œì¸ë³„ ë§ì¶¤í˜• ê±´ê°• ê´€ë¦¬ ì†”ë£¨ì…˜ì„ ì œê³µí•˜ëŠ” í”Œë«í¼ì„ ê°œë°œí•˜ê³ ì í•©ë‹ˆë‹¤.

ì£¼ìš” ê¸°ëŠ¥:
- AI ê¸°ë°˜ ê±´ê°• ìœ„í—˜ë„ ì˜ˆì¸¡
- ê°œì¸ ë§ì¶¤í˜• ìš´ë™/ì‹ë‹¨ ì¶”ì²œ
- ì‹¤ì‹œê°„ ê±´ê°• ëª¨ë‹ˆí„°ë§
- ì „ë¬¸ê°€ ì—°ê²° ì„œë¹„ìŠ¤`,

            2: `IoT ì„¼ì„œ ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë†ì—… ì†”ë£¨ì…˜

í˜„ì¬ ë†ì—… í˜„ì¥ì—ì„œëŠ” ê²½í—˜ì— ì˜ì¡´í•œ ì¬ë°°ê°€ ì´ë£¨ì–´ì§€ê³  ìˆì–´, ê¸°í›„ë³€í™”ì— ëŒ€ì‘í•˜ê¸° ì–´ë µê³  ìƒì‚°ì„± ì˜ˆì¸¡ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.

ì €í¬ëŠ” IoT ì„¼ì„œì™€ AIë¥¼ ê²°í•©í•˜ì—¬ í† ì–‘, ê¸°í›„, ì‘ë¬¼ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§í•˜ê³  ìµœì ì˜ ì¬ë°° í™˜ê²½ì„ ìë™ ì œì–´í•˜ëŠ” ìŠ¤ë§ˆíŠ¸íŒœ ì†”ë£¨ì…˜ì„ ê°œë°œí•©ë‹ˆë‹¤.

ì£¼ìš” ê¸°ëŠ¥:
- í† ì–‘/í™˜ê²½ ì„¼ì„œ ë„¤íŠ¸ì›Œí¬
- AI ê¸°ë°˜ ìƒìœ¡ ì˜ˆì¸¡
- ìë™ ê´€ìˆ˜/ì‹œë¹„ ì‹œìŠ¤í…œ
- ë³‘í•´ì¶© ì¡°ê¸° ê²½ë³´`,

            3: `AI ê¸°ë°˜ íí”Œë¼ìŠ¤í‹± ìë™ ë¶„ë¥˜ ì‹œìŠ¤í…œ

í˜„ì¬ íí”Œë¼ìŠ¤í‹± ì¬í™œìš©ë¥ ì´ ë‚®ì€ ì£¼ìš” ì›ì¸ì€ ìˆ˜ì‘ì—… ë¶„ë¥˜ì˜ í•œê³„ë¡œ ì¸í•œ ì˜¤ì—¼ê³¼ í˜¼í•©ì…ë‹ˆë‹¤.

ì €í¬ëŠ” ì»´í“¨í„° ë¹„ì „ê³¼ AIë¥¼ í™œìš©í•˜ì—¬ íí”Œë¼ìŠ¤í‹±ì„ ì¬ì§ˆë³„ë¡œ ìë™ ë¶„ë¥˜í•˜ëŠ” ì‹œìŠ¤í…œì„ ê°œë°œí•˜ì—¬ ì¬í™œìš©ë¥ ì„ íšê¸°ì ìœ¼ë¡œ ë†’ì´ê³ ì í•©ë‹ˆë‹¤.

ì£¼ìš” ê¸°ëŠ¥:
- ì‹¤ì‹œê°„ ì´ë¯¸ì§€ ì¸ì‹ ë¶„ë¥˜
- ì¬ì§ˆë³„ ìë™ ë¶„ë¦¬ ì»¨ë² ì´ì–´
- ì˜¤ì—¼ë„ ê°ì§€ ì‹œìŠ¤í…œ
- ì¬í™œìš© ë°ì´í„° ë¶„ì„ ëŒ€ì‹œë³´ë“œ`
        };

        const demoResults = {
            1: {
                n2b: {
                    N: "í˜„ì¬ ê±´ê°•ê´€ë¦¬ ì•±ë“¤ì€ ë‹¨ìˆœí•œ ë°ì´í„° ê¸°ë¡ì— ê·¸ì¹˜ê³  ìˆì–´, ê°œì¸ë³„ ë§ì¶¤ ê±´ê°• ê´€ë¦¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ì§€ ëª»í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
                    B: "AIë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ê±´ê°• ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³ , ê°œì¸ë³„ ë§ì¶¤í˜• ê±´ê°• ê´€ë¦¬ ì†”ë£¨ì…˜ì„ ì œê³µí•˜ëŠ” í”Œë«í¼ì„ ê°œë°œí•©ë‹ˆë‹¤.",
                    C: "AI ê¸°ë°˜ ê°œì¸í™”ëœ ë¶„ì„ì„ í†µí•´ ì‚¬ìš©ìë³„ ê±´ê°• ìœ„í—˜ì„ ì¡°ê¸°ì— íŒŒì•…í•˜ê³  ì˜ˆë°©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                },
                policies: [
                    { title: "2025ë…„ AIìœµí•© í—¬ìŠ¤ì¼€ì–´ ê¸°ìˆ ê°œë°œ ì§€ì›ì‚¬ì—…", category: "ê¸°ìˆ ", agency: "ê³¼í•™ê¸°ìˆ ì •ë³´í†µì‹ ë¶€", deadline: "2025-02-28", url: "https://www.bizinfo.go.kr", score: 9, reason: "AI í—¬ìŠ¤ì¼€ì–´ í”Œë«í¼ ê°œë°œì— ì§ì ‘ ë¶€í•©í•˜ëŠ” R&D ì§€ì›ì‚¬ì—…ì…ë‹ˆë‹¤." },
                    { title: "2025ë…„ ì°½ì—…ë„ì•½íŒ¨í‚¤ì§€ ì§€ì›ì‚¬ì—…", category: "ì°½ì—…", agency: "ì¤‘ì†Œë²¤ì²˜ê¸°ì—…ë¶€", deadline: "2025-03-15", url: "https://www.k-startup.go.kr", score: 8, reason: "ì´ˆê¸° ì°½ì—…ê¸°ì—…ì˜ ì‚¬ì—…í™” ìê¸ˆê³¼ ë©˜í† ë§ì„ ì§€ì›í•©ë‹ˆë‹¤." },
                    { title: "2025ë…„ ë°”ì´ì˜¤í—¬ìŠ¤ ê¸°ìˆ ê°œë°œ ì§€ì›ì‚¬ì—…", category: "ê¸°ìˆ ", agency: "ë³´ê±´ë³µì§€ë¶€", deadline: "2025-01-31", url: "https://www.bizinfo.go.kr", score: 7, reason: "í—¬ìŠ¤ì¼€ì–´ ê¸°ìˆ ì˜ ìƒìš©í™”ë¥¼ ì§€ì›í•©ë‹ˆë‹¤." }
                ]
            },
            2: {
                n2b: {
                    N: "í˜„ì¬ ë†ì—… í˜„ì¥ì—ì„œëŠ” ê²½í—˜ì— ì˜ì¡´í•œ ì¬ë°°ê°€ ì´ë£¨ì–´ì§€ê³  ìˆì–´ ê¸°í›„ë³€í™” ëŒ€ì‘ì´ ì–´ë µìŠµë‹ˆë‹¤.",
                    B: "IoT ì„¼ì„œì™€ AIë¥¼ ê²°í•©í•˜ì—¬ ìµœì ì˜ ì¬ë°° í™˜ê²½ì„ ìë™ ì œì–´í•˜ëŠ” ìŠ¤ë§ˆíŠ¸íŒœ ì†”ë£¨ì…˜ì„ ê°œë°œí•©ë‹ˆë‹¤.",
                    C: "IoT-AI ìœµí•© ê¸°ìˆ ë¡œ ë†ì—… ìƒì‚°ì„±ì„ 30% ì´ìƒ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                },
                policies: [
                    { title: "2025ë…„ ìŠ¤ë§ˆíŠ¸íŒœ í˜ì‹ ë°¸ë¦¬ ì§€ì›ì‚¬ì—…", category: "ê¸°ìˆ ", agency: "ë†ë¦¼ì¶•ì‚°ì‹í’ˆë¶€", deadline: "2025-02-15", url: "https://www.bizinfo.go.kr", score: 9, reason: "ìŠ¤ë§ˆíŠ¸íŒœ ê¸°ìˆ  ê°œë°œ ë° ì‹¤ì¦ì— ì§ì ‘ ë¶€í•©í•©ë‹ˆë‹¤." },
                    { title: "2025ë…„ ë†ì‹í’ˆ ICTìœµë³µí•© ì§€ì›ì‚¬ì—…", category: "ê¸°ìˆ ", agency: "ë†ì´Œì§„í¥ì²­", deadline: "2025-03-01", url: "https://www.bizinfo.go.kr", score: 8, reason: "IoT ê¸°ë°˜ ë†ì—… ê¸°ìˆ  ê°œë°œì„ ì§€ì›í•©ë‹ˆë‹¤." },
                    { title: "2025ë…„ ì²­ë…„ì°½ì—…ë† ì˜ë†ì •ì°© ì§€ì›", category: "ì°½ì—…", agency: "ë†ë¦¼ì¶•ì‚°ì‹í’ˆë¶€", deadline: "2025-01-31", url: "https://www.bizinfo.go.kr", score: 7, reason: "ë†ì—… ë¶„ì•¼ ì²­ë…„ ì°½ì—…ì„ ì§€ì›í•©ë‹ˆë‹¤." }
                ]
            },
            3: {
                n2b: {
                    N: "í˜„ì¬ íí”Œë¼ìŠ¤í‹± ì¬í™œìš©ë¥ ì´ ë‚®ì€ ì£¼ìš” ì›ì¸ì€ ìˆ˜ì‘ì—… ë¶„ë¥˜ì˜ í•œê³„ì…ë‹ˆë‹¤.",
                    B: "ì»´í“¨í„° ë¹„ì „ê³¼ AIë¥¼ í™œìš©í•˜ì—¬ íí”Œë¼ìŠ¤í‹±ì„ ì¬ì§ˆë³„ë¡œ ìë™ ë¶„ë¥˜í•˜ëŠ” ì‹œìŠ¤í…œì„ ê°œë°œí•©ë‹ˆë‹¤.",
                    C: "AI ê¸°ë°˜ ìë™ ë¶„ë¥˜ë¡œ ì¬í™œìš©ë¥ ì„ 50% ì´ìƒ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                },
                policies: [
                    { title: "2025ë…„ ìì›ìˆœí™˜ ê¸°ìˆ ê°œë°œ ì§€ì›ì‚¬ì—…", category: "ê¸°ìˆ ", agency: "í™˜ê²½ë¶€", deadline: "2025-02-28", url: "https://www.bizinfo.go.kr", score: 9, reason: "íìì› ì¬í™œìš© ê¸°ìˆ  ê°œë°œì— ì§ì ‘ ë¶€í•©í•©ë‹ˆë‹¤." },
                    { title: "2025ë…„ í™˜ê²½ì‚°ì—… í˜ì‹ ì„±ì¥ ì§€ì›ì‚¬ì—…", category: "ê¸°ìˆ ", agency: "í™˜ê²½ë¶€", deadline: "2025-03-15", url: "https://www.bizinfo.go.kr", score: 8, reason: "í™˜ê²½ ë¶„ì•¼ ê¸°ìˆ  í˜ì‹  ê¸°ì—…ì„ ì§€ì›í•©ë‹ˆë‹¤." },
                    { title: "2025ë…„ íƒ„ì†Œì¤‘ë¦½ ê¸°ìˆ í˜ì‹  ì§€ì›ì‚¬ì—…", category: "ê¸°ìˆ ", agency: "ì‚°ì—…í†µìƒìì›ë¶€", deadline: "2025-02-15", url: "https://www.bizinfo.go.kr", score: 7, reason: "íƒ„ì†Œì¤‘ë¦½ ê´€ë ¨ ê¸°ìˆ  ê°œë°œì„ ì§€ì›í•©ë‹ˆë‹¤." }
                ]
            }
        };

        let selectedSample = null;

        function setMode(mode) {
            currentMode = mode;
            document.getElementById('demoBtn').classList.toggle('active', mode === 'demo');
            document.getElementById('realBtn').classList.toggle('active', mode === 'real');
            document.getElementById('apiKeySection').style.display = mode === 'real' ? 'block' : 'none';
        }

        function selectSample(num) {
            selectedSample = num;
            document.querySelectorAll('.sample-card').forEach((card, idx) => {
                card.classList.toggle('selected', idx + 1 === num);
            });
            document.getElementById('businessPlan').value = samples[num];
        }

        async function analyze() {
            const businessPlan = document.getElementById('businessPlan').value.trim();
            if (!businessPlan) {
                alert('ì‚¬ì—…ê³„íšì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const apiKey = document.getElementById('apiKey').value.trim();
            if (currentMode === 'real' && !apiKey) {
                alert('API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            document.getElementById('analyzeBtn').disabled = true;
            document.getElementById('loadingSection').classList.add('show');
            document.getElementById('resultSection').classList.remove('show');
            document.getElementById('demoNotice').classList.remove('show');

            try {
                if (currentMode === 'demo' && selectedSample) {
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    const demoResult = demoResults[selectedSample];
                    displayResults(demoResult.n2b, demoResult.policies);
                    document.getElementById('demoNotice').classList.add('show');
                } else {
                    const analyzeResponse = await fetch(BACKEND_URL + '/analyze', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            proposalText: businessPlan,
                            apiKey: apiKey
                        })
                    });

                    if (!analyzeResponse.ok) throw new Error('N2B ë¶„ì„ ì‹¤íŒ¨');
                    const analyzeResult = await analyzeResponse.json();

                    const matchResponse = await fetch(BACKEND_URL + '/match', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            n2bAnalysis: analyzeResult,
                            apiKey: apiKey
                        })
                    });

                    if (!matchResponse.ok) throw new Error('ì •ì±… ë§¤ì¹­ ì‹¤íŒ¨');
                    const matchResult = await matchResponse.json();
                    displayResults(analyzeResult, matchResult.matches);
                }
            } catch (error) {
                alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                document.getElementById('analyzeBtn').disabled = false;
                document.getElementById('loadingSection').classList.remove('show');
            }
        }

        function displayResults(n2b, policies) {
            document.getElementById('resultN').textContent = n2b.N;
            document.getElementById('resultB').textContent = n2b.B;
            document.getElementById('resultC').textContent = n2b.C;

            const policyHTML = policies.map((policy, index) => `
                <div class="policy-card">
                    <div class="policy-header">
                        <div class="policy-title">
                            <span class="policy-rank">${index + 1}ìœ„.</span>
                            ${policy.title}
                        </div>
                        <span class="match-score">ë§¤ì¹­ë„ ${policy.score}/10</span>
                    </div>
                    <div class="policy-meta">
                        <span class="policy-meta-item category">${policy.category}</span>
                        <span class="policy-meta-item">ğŸ¢ ${policy.agency}</span>
                        <span class="policy-meta-item deadline">ğŸ“… ë§ˆê°: ${policy.deadline}</span>
                    </div>
                    <div class="policy-reason">${policy.reason}</div>
                    <a href="${policy.url}" target="_blank" class="policy-link">ìƒì„¸ì •ë³´ ë³´ê¸° â†’</a>
                </div>
            `).join('');

            document.getElementById('policyResults').innerHTML = policyHTML;
            document.getElementById('resultSection').classList.add('show');
        }
    </script>
</body>
</html>
